% SPDX-License-Identifier: CC-BY-SA-4.0
% Session: Java Memory Model
% Exercise: The Volatile Keyword

\begingroup

\begin{exercice}[Volatilité]
  \label{exo:memory/volatile}

  Les trois codes suivants s'exécutent en parallèle, avec initialement, \lstinline{x = y = z = 0}.

  \begin{lstlisting}
    /******* Thread 1 *******/
    x = 1;
    y = 1;
    
    /******* Thread 2 *******/
    if(y == 1)
    z = 1;

    /******* Thread 3 *******/
    if(z == 1)
    System.out.println(x);
  \end{lstlisting}

  \begin{enumerate}
  \item Quelles sont les sorties possibles si \lstinline{x}, \lstinline{y} et \lstinline{z} sont déclarés \lstinline{volatile} ?
  \item Quelles variables faut-il déclarer \lstinline{volatile} pour éliminer tout data race ?
  \end{enumerate}

\end{exercice}

\endgroup
\endinput
